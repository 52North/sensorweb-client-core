/*! n52-sensorweb-client-core.0.1.0 2015-09-13 17:41 */
angular.module("exportTsModule",["timeseriesModule","timeModule"]).factory("exportTsService",["timeService","$window","$translate","timeseriesService",function(a,b,c,d){function e(b){var e=a.getRequestTimespan(),f="?generalize="+!1;f=f+"&timespan="+encodeURIComponent(e),f=f+"&locale="+c.preferredLanguage(),f+="&zip=true",f+="&bom=true";var g=d.getTimeseries(b).apiUrl;return g+"/timeseries/"+b+"/getData.zip"+f}function f(a){b.open(a)}return{openInNewWindow:f,createCsvDownloadLink:e}}]),angular.module("legendModule",["timeseriesModule","exportTsModule","styleModule"]).directive("swcLegend",function(){return{restrict:"E",templateUrl:"templates/legend/legend.html",controller:["$scope","timeseriesService",function(a,b){a.timeseriesList=b.timeseries}]}}).directive("swcLegendEntry",["exportTsService","mapService","$location","styleModalOpener",function(a,b,c,d){return{restrict:"E",templateUrl:"templates/legend/legend-entry.html",scope:{timeseries:"="},controller:["$scope","timeseriesService","timeService","styleService",function(e,f,g,h){e.infoVisible=!1,e.toggleSelection=function(a){h.toggleSelection(a)},e.removeTs=function(a){f.removeTimeseries(a.internalId)},e.toggleDiagram=function(a){h.toggleTimeseriesVisibility(a)},e.openStyling=function(a){d(a)},e.showInformation=function(){e.infoVisible=!e.infoVisible},e.showInMap=function(a){b.showStation(a),c.url("/map")},e.jumpToLastTimeStamp=function(a){a&&a.timestamp&&g.jumpToLastTimeStamp(a.timestamp,!0)},e.jumpToFirstTimeStamp=function(a){a&&a.timestamp&&g.jumpToLastTimeStamp(a.timestamp,!0)},e.selectRefValue=function(a,b){f.toggleReferenceValue(a,b)},e.createExportCsv=function(b){a.openInNewWindow(a.createCsvDownloadLink(b))},e.$on("allTimeseriesChanged",function(a){e.$apply()})}]}}]).controller("legendButtonController",["$scope","statusService",function(a,b){a.status=b.status,a.toggleLegend=function(){b.status.showLegend=!b.status.showLegend}}]);