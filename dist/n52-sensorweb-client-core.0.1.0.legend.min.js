/*! n52-sensorweb-client-core.0.1.0 */
angular.module("n52.core.exportTs",["n52.core.timeseries","n52.core.time"]).factory("exportTsService",["timeService","$window","$translate","timeseriesService",function(a,b,c,d){function e(b){var e=a.getCurrentTimespan(),f="?generalize="+!1;f=f+"&timespan="+encodeURIComponent(e),f=f+"&locale="+c.preferredLanguage(),f+="&zip=true",f+="&bom=true";var g=d.getTimeseries(b).apiUrl;return g+"/timeseries/"+b+"/getData.zip"+f}function f(a){b.open(a)}return{openInNewWindow:f,createCsvDownloadLink:e}}]),angular.module("n52.core.legend",["n52.core.timeseries","n52.core.exportTs","n52.core.style"]).directive("swcLegend",function(){return{restrict:"E",templateUrl:"templates/legend/legend.html",controller:["$scope","timeseriesService",function(a,b){a.timeseriesList=b.timeseries}]}}).directive("swcLegendEntry",["exportTsService","mapService","$location","styleModalOpener",function(a,b,c,d){return{restrict:"E",templateUrl:"templates/legend/legend-entry.html",scope:{timeseries:"="},controller:["$scope","timeseriesService","timeService","styleService","$rootScope",function(e,f,g,h,i){e.infoVisible=!1,e.toggleSelection=function(a){h.toggleSelection(a)},e.removeTs=function(a){f.removeTimeseries(a.internalId)},e.toggleDiagram=function(a){h.toggleTimeseriesVisibility(a)},e.openStyling=function(a){d(a)},e.showInformation=function(){e.infoVisible=!e.infoVisible},e.showInMap=function(a){b.showStation(a),c.url("/map")},e.jumpToLastTimeStamp=function(a){a&&a.timestamp&&g.jumpToLastTimeStamp(a.timestamp,!0)},e.jumpToFirstTimeStamp=function(a){a&&a.timestamp&&g.jumpToLastTimeStamp(a.timestamp,!0)},e.selectRefValue=function(a,b){f.toggleReferenceValue(a,b.internalId)},e.createExportCsv=function(b){a.openInNewWindow(a.createCsvDownloadLink(b))}}]}}]).controller("legendButtonController",["$scope","statusService",function(a,b){a.status=b.status,a.toggleLegend=function(){b.status.showLegend=!b.status.showLegend}}]),angular.module("n52.core.timeseriesController",["n52.core.timeseries","n52.core.exportTs","n52.core.style"]).controller("deleteAllTsCtrl",["$scope","timeseriesService",function(a,b){a.deleteAll=function(){b.removeAllTimeseries()}}]).controller("IsInTimespanCtrl",["$scope","timeService",function(a,b){a.time=b.time,a.isInTimeSpan=function(a){return b.isInCurrentTimespan(a)}}]);