/*! n52-sensorweb-client-core.0.1.0 */
angular.module("n52.core.exportTs",["n52.core.timeseries","n52.core.time"]).factory("exportTsService",["timeService","$window","$translate","timeseriesService",function(a,b,c,d){function e(b){var e=a.getCurrentTimespan(),f="?generalize="+!1;f=f+"&timespan="+encodeURIComponent(e),f=f+"&locale="+c.preferredLanguage(),f+="&zip=true",f+="&bom=true";var g=d.getTimeseries(b).apiUrl;return g+"/timeseries/"+b+"/getData.zip"+f}function f(a){b.open(a)}return{openInNewWindow:f,createCsvDownloadLink:e}}]),angular.module("n52.core.legend",["n52.core.timeseries","n52.core.exportTs","n52.core.style"]).directive("swcLegend",function(){return{restrict:"E",templateUrl:"templates/legend/legend.html",controller:["$scope","timeseriesService",function(a,b){a.timeseriesList=b.timeseries}]}}).directive("swcLegendEntry",[function(){return{restrict:"E",templateUrl:"templates/legend/legend-entry.html",scope:{timeseries:"="},controller:"SwcLegendEntryCtrl"}}]).controller("SwcLegendEntryCtrl",["$scope","timeseriesService","timeService","styleService","exportTsService","mapService","$location","styleModalOpener",function(a,b,c,d,e,f,g,h){a.infoVisible=!1,a.toggleSelection=function(a){d.toggleSelection(a)},a.removeTs=function(a){b.removeTimeseries(a.internalId)},a.toggleDiagram=function(a){d.toggleTimeseriesVisibility(a)},a.openStyling=function(a){h(a)},a.showInformation=function(){a.infoVisible=!a.infoVisible},a.showInMap=function(a){f.showStation(a),g.url("/map")},a.jumpToLastTimeStamp=function(a){a&&a.timestamp&&c.jumpToLastTimeStamp(a.timestamp,!0)},a.jumpToFirstTimeStamp=function(a){a&&a.timestamp&&c.jumpToLastTimeStamp(a.timestamp,!0)},a.selectRefValue=function(a,c){b.toggleReferenceValue(a,c.internalId)},a.createExportCsv=function(a){e.openInNewWindow(e.createCsvDownloadLink(a))}}]).controller("legendButtonController",["$scope","statusService",function(a,b){a.status=b.status,a.toggleLegend=function(){b.status.showLegend=!b.status.showLegend}}]),angular.module("n52.core.timeseriesController",["n52.core.timeseries","n52.core.exportTs","n52.core.style"]).controller("deleteAllTsCtrl",["$scope","timeseriesService",function(a,b){a.deleteAll=function(){b.removeAllTimeseries()}}]).controller("IsInTimespanCtrl",["$scope","timeService",function(a,b){a.time=b.time,a.isInTimeSpan=function(a){return b.isInCurrentTimespan(a)}}]);