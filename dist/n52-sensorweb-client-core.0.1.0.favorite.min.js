/*! n52-sensorweb-client-core.0.1.0 2015-09-13 17:41 */
angular.module("favoriteModule",["timeseriesModule","exportTsModule","styleModule","favoriteCore","utilsCore","ui-notification"]).directive("swcFavoriteAddStar",function(){return{restrict:"E",templateUrl:"templates/favorite/favorite-star.html",scope:{timeseries:"="},controller:["$scope","$translate","favoriteService","Notification",function(a,b,c,d){a.isFavorite=c.hasFavorite(a.timeseries.internalId),a.toggleFavorite=function(){var e;a.isFavorite?(c.removeFavorite(a.timeseries.internalId),e=a.timeseries.label,d.primary(b.instant("favorite.single.remove").replace("{0}",e))):(c.addFavorite(a.timeseries),e=a.timeseries.label,d.primary(b.instant("favorite.single.add").replace("{0}",e))),a.isFavorite=c.hasFavorite(a.timeseries.internalId)}}]}}).directive("swcAddFavoriteGroup",function(){return{restrict:"E",templateUrl:"templates/favorite/favorite-add-group.html",scope:{},controller:["$scope","$translate","favoriteService","timeseriesService","Notification",function(a,b,c,d,e){a.createFavoriteGroup=function(){var a=c.addFavoriteGroup(d.getAllTimeseries());angular.isString(a)?e.primary(b.instant("favorite.group.add").replace("{0}",a)):e.primary(b.instant("favorite.group.noTimeseries"))}}]}}).directive("swcFavoriteList",function(){return{restrict:"E",templateUrl:"templates/favorite/favorite-list.html",scope:{},controller:["$scope","$location","favoriteService","timeseriesService","editFavoriteModalOpener",function(a,b,c,d,e){a.favorites=c.favorites,a.edit=function(a){e(a)},a.addToDiagram=function(a){"single"===a.type?d.addTimeseries(a.timeseries):"group"===a.type&&angular.forEach(a.collection,function(a){d.addTimeseries(a)}),b.url("/diagram")},a["delete"]=function(a){c.removeFavorite(a.id)}}]}}).directive("swcImportFavoriteButton",["utils","favoriteImExportService",function(a,b){return{restrict:"E",templateUrl:"templates/favorite/favorite-import-button.html",link:function(c,d,e){a.isFileAPISupported()?d.find("input").change({},function(a){b.importFavorites(a)}):(d.find("input").remove(),d.find("div").click(function(){b.importFavorites()}))}}}]).directive("swcExportFavoriteButton",function(){return{restrict:"E",templateUrl:"templates/favorite/favorite-export-button.html",controller:["$scope","favoriteImExportService",function(a,b){a.exportFavorites=function(){b.exportFavorites()}}]}}).controller("favoriteCounterController",["$scope","favoriteService",function(a,b){a.favorites=b.favorites}]).directive("customOnChange",["$window",function(a){return{restrict:"A",link:function(b,c,d){var e=null!==a.navigator.userAgent.match(/(iPad|iPhone|iPod)/g),f=a.File&&a.FileReader&&a.Blob&&!e;if(f){var g=b.$eval(d.customOnChange);c.bind("change",g)}else c.remove()}}}]).service("editFavoriteModalOpener",["$modal",function(a){return function(b){a.open({animation:!0,templateUrl:"templates/favorite/favorite-edit.html",resolve:{favorite:function(){return b}},controller:["$scope","$modalInstance","favorite","favoriteService",function(a,b,c,d){a.label=c.label,a.submit=function(){d.changeLabel(c,a.label),b.close()}}]})}}]);